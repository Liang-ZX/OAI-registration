

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
  
  <!-- Licensed under the Apache 2.0 License -->
  <link rel="stylesheet" type="text/css" href="_static/fonts/open-sans/stylesheet.css" />
  <!-- Licensed under the SIL Open Font License -->
  <link rel="stylesheet" type="text/css" href="_static/fonts/source-serif-pro/source-serif-pro.css" />
  <link rel="stylesheet" type="text/css" href="_static/css/bootstrap.min.css" />
  <link rel="stylesheet" type="text/css" href="_static/css/bootstrap-theme.min.css" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <!-- Licensed under the Apache 2.0 License -->
  <link rel="stylesheet" type="text/css" href="_static/fonts/open-sans/stylesheet.css" />
  <!-- Licensed under the SIL Open Font License -->
  <link rel="stylesheet" type="text/css" href="_static/fonts/source-serif-pro/source-serif-pro.css" />
  <link rel="stylesheet" type="text/css" href="_static/css/bootstrap.min.css" />
  <link rel="stylesheet" type="text/css" href="_static/css/bootstrap-theme.min.css" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
    <title>Relaxometry &#8212; pyKNEEr 1.0.0 documentation</title>
    <link rel="stylesheet" href="_static/guzzle.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/css/custom.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Development" href="development.html" />
    <link rel="prev" title="Morphology" href="morphology.html" />
  
  
  
   


  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="development.html" title="Development"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="morphology.html" title="Morphology"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">pyKNEEr 1.0.0 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="container-wrapper">

      <div id="mobile-toggle">
        <a href="#"><span class="glyphicon glyphicon-align-justify" aria-hidden="true"></span></a>
      </div>
  <div id="left-column">
    <div class="sphinxsidebar"><!--
The following code is the original from the template
It writes a text at the top of the side bar that links to the home page

<a href="
    index.html" class="text-logo">pyKNEEr</a>
-->


<!--
This line add a figure at the top of the left side bar that links to the home page
The figure has to be in the folder "build" (not in the subfolder "html")
(I could not make the relative path to the folders "_figure" in "source" and "_images" in "build" work)
-->

<a href="index.html"><img src="pykneer_logo_for_website.png" style="width:253px;height:78px;"></a>
<div class="sidebar-block">
  <div class="sidebar-wrapper">
    <!--<h2>Table Of Contents</h2> --> <!-- Modified by S.Bonaretti -->
  </div>
  <div class="sidebar-toc">
    
    
      <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="preprocessing.html">Preprocessing</a></li>
<li class="toctree-l1"><a class="reference internal" href="segmentation.html">Segmentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="morphology.html">Morphology</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Relaxometry</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#exponential-or-linear-fitting">Exponential or linear fitting</a></li>
<li class="toctree-l2"><a class="reference internal" href="#epg-modeling">EPG modeling</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="development.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">FAQ</a></li>
</ul>

    
  </div>
</div>
      
    </div>
  </div>
        <div id="right-column">
          <!-- # Commented out by S.Bonaretti - to avoid docs >> index etc.
          <div role="navigation" aria-label="breadcrumbs navigation">
            <ol class="breadcrumb">
              <li><a href="index.html">Docs</a></li>
              
              <li>Relaxometry</li>
            </ol>
          </div>
          -->
          <div class="document clearer body">
            
  <div class="section" id="relaxometry">
<span id="id1"></span><h1>Relaxometry<a class="headerlink" href="#relaxometry" title="Permalink to this headline">¶</a></h1>
<p><em>pyKNEEr</em> computes:</p>
<ul class="simple">
<li><p>Exponential or linear fitting [1,2]. Images with shortest TE or TSL can be rigidly registered to the image with longest TE or TSL</p></li>
<li><p><span class="math notranslate nohighlight">\(T_2\)</span> maps from DESS acquisitions using Extended Phase Graph (EPG) modeling [3]</p></li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="section" id="exponential-or-linear-fitting">
<h2>Exponential or linear fitting<a class="headerlink" href="#exponential-or-linear-fitting" title="Permalink to this headline">¶</a></h2>
<div class="section" id="input-image-folder-list">
<h3>Input: Image folder list<a class="headerlink" href="#input-image-folder-list" title="Permalink to this headline">¶</a></h3>
<p>For the demo images, the input file is <code class="docutils literal notranslate"><span class="pre">image_list_relaxometry_fitting.txt</span></code>, which contains:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">./</span><span class="n">preprocessed</span>
<span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">./</span><span class="n">segmented</span>
<span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="mi">4</span>
<span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="n">i1</span> <span class="mo">01</span><span class="n">_cubeQuant_01_orig</span><span class="o">.</span><span class="n">mha</span>
<span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="n">i2</span> <span class="mo">01</span><span class="n">_cubeQuant_02_orig</span><span class="o">.</span><span class="n">mha</span>
<span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="n">i3</span> <span class="mo">01</span><span class="n">_cubeQuant_03_orig</span><span class="o">.</span><span class="n">mha</span>
<span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="n">i4</span> <span class="mo">01</span><span class="n">_cubeQuant_04_orig</span><span class="o">.</span><span class="n">mha</span>
<span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="n">bm</span> <span class="mo">01</span><span class="n">_cubeQuant_01_prep_f</span><span class="o">.</span><span class="n">mha</span>
<span class="p">[</span><span class="mi">9</span><span class="p">]</span> <span class="n">cm</span> <span class="mo">01</span><span class="n">_cubeQuant_01_prep_fc</span><span class="o">.</span><span class="n">mha</span>
</pre></div>
</div>
<p>where:</p>
<ul class="simple">
<li><p>Line 1: Preprocessed folder, containing the <code class="docutils literal notranslate"><span class="pre">*_orig.mha</span></code> images</p></li>
<li><p>Line 2: Segmented folder, containing femur and cartilage masks</p></li>
<li><p>Line 3: Number of images per acquisition</p></li>
<li><p>Lines 4-7: Images of the acquisition</p></li>
<li><p>Line 8: Name of femur mask</p></li>
<li><p>Line 9: Name of femoral cartilage mask</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When using <strong>your own data</strong>:</p>
<ul class="simple">
<li><p>Customize <code class="docutils literal notranslate"><span class="pre">image_list_relaxometry_fitting.txt</span></code> with your own image information</p></li>
</ul>
</div>
</div>
<div class="section" id="executing-relaxometry-fitting-ipynb">
<span id="execution-relax"></span><h3>Executing relaxometry_fitting.ipynb<a class="headerlink" href="#executing-relaxometry-fitting-ipynb" title="Permalink to this headline">¶</a></h3>
<p>To calculate relaxometry maps:</p>
<ul class="simple">
<li><p><a class="reference internal" href="faq.html#launch-jup"><span class="std std-ref">Launch</span></a> Jupyter notebook</p></li>
<li><p>In <em>File Browser</em>, navigate to <code class="docutils literal notranslate"><span class="pre">relaxometry_fitting.ipynb</span></code>, open it, and:</p>
<ul>
<li><p>Customize the input variables:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">method_flag</span></code> (1 for linear fitting, 0 for exponential fitting)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">registration_flag</span></code> (1 to execute rigid registration, 0 otherwise)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">n_of_cores</span></code> (<a class="reference internal" href="faq.html#cores"><span class="std std-ref">How do I choose the number of cores?</span></a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">output_file_name</span></code></p></li>
</ul>
</li>
<li><p>Follow the instructions in the notebook</p></li>
</ul>
</li>
<li><p><a class="reference internal" href="faq.html#save-jup"><span class="std std-ref">Save</span></a> your notebook at the end of the process</p></li>
</ul>
</div>
<div class="section" id="output-relaxometry-maps">
<span id="output-relax"></span><h3>Output: relaxometry maps<a class="headerlink" href="#output-relaxometry-maps" title="Permalink to this headline">¶</a></h3>
<p>The outputs are in the folder <code class="docutils literal notranslate"><span class="pre">relaxometry</span></code>. For each subject, the fitting maps can be:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">*_orig_map_exp_aligned.mha</span></code> (e.g. <code class="docutils literal notranslate"><span class="pre">01_cubeQuant_01_orig_map_exp_aligned.mha</span></code>): when the acquisitions are rigidly aligned to the first and the fitting is exponential</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">*_orig_map_lin_aligned.mha</span></code>: when the acquisitions are rigidly aligned to the first and the fitting is linear</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">*_orig_map_exp.mha</span></code>: when the acquisitions are <em>not</em> aligned to the first and the fitting is exponential</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">*_orig_map_lin.mha</span></code>: when the acquisitions are <em>not</em> aligned to the first and the fitting is linear</p></li>
</ul>
<p>Maps are computed only in the masked volumes to save computational time</p>
</div>
<div class="section" id="visualization-2d-and-3d-maps-graph-and-table">
<span id="visualization-relax"></span><h3>Visualization: 2D and 3D maps, graph, and table<a class="headerlink" href="#visualization-2d-and-3d-maps-graph-and-table" title="Permalink to this headline">¶</a></h3>
<p>Relaxometry maps are visualized as:</p>
<ul class="simple">
<li><p><em>2D maps</em>: For each subject three slices of the first acquisition are overlapped by the relaxation time map</p></li>
<li><p><em>3D maps</em>: Interactive visualization where only one map at the time can be visualized</p></li>
<li><p><em>Graph</em>: Dots represent the average relaxation time per image and bars represents the standard deviation</p></li>
<li><p><em>Table</em>: Numerical values of average and standard deviation of relaxation times are displayed in a table, also saved as <code class="docutils literal notranslate"><span class="pre">.csv</span></code> file for subsequent analysis</p></li>
</ul>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/relaxometry.png"><img alt="_images/relaxometry.png" src="_images/relaxometry.png" style="width: 813.6px; height: 235.2px;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="epg-modeling">
<h2>EPG modeling<a class="headerlink" href="#epg-modeling" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id2">
<h3>Input: Image folder list<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>For the demo images, the input file is <code class="docutils literal notranslate"><span class="pre">image_list_relaxometry_EPG.txt</span></code>, which contains:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">./</span><span class="n">preprocessed</span>
<span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">./</span><span class="n">segmented</span>
<span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="n">i1</span> <span class="mo">01</span><span class="n">_DESS_01_orig</span><span class="o">.</span><span class="n">mha</span>
<span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="n">i2</span> <span class="mo">01</span><span class="n">_DESS_02_orig</span><span class="o">.</span><span class="n">mha</span>
<span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="n">cm</span> <span class="mo">01</span><span class="n">_DESS_01_prep_fc</span><span class="o">.</span><span class="n">mha</span>
</pre></div>
</div>
<p>where:</p>
<ul class="simple">
<li><p>Line 1: Preprocessed folder, containing the <code class="docutils literal notranslate"><span class="pre">*_orig.mha</span></code> images</p></li>
<li><p>Line 2: Segmented folder, containing cartilage masks</p></li>
<li><p>Lines 3-4: Images of the acquisition</p></li>
<li><p>Line 5: Name of femoral cartilage mask</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When using <strong>your own data</strong>:</p>
<ul class="simple">
<li><p>Customize <code class="docutils literal notranslate"><span class="pre">image_list_relaxometry_EPG.txt</span></code> with your own image information</p></li>
</ul>
</div>
</div>
<div class="section" id="execution-output-and-visualization">
<h3>Execution, Output, and Visualization<a class="headerlink" href="#execution-output-and-visualization" title="Permalink to this headline">¶</a></h3>
<p>Execution:</p>
<ul class="simple">
<li><p>To calculate the map, apply the <a class="reference internal" href="#execution-relax"><span class="std std-ref">instructions</span></a> above to the notebook <code class="docutils literal notranslate"><span class="pre">relaxometry_EPG.ipynb</span></code>. In the notebook, customize the variables:
- <code class="docutils literal notranslate"><span class="pre">number_of_cores</span></code> (<a class="reference internal" href="faq.html#cores"><span class="std std-ref">How do I choose the number of cores?</span></a>)
- <code class="docutils literal notranslate"><span class="pre">output_file_name</span></code></p></li>
</ul>
<p>Output and visualization:</p>
<ul class="simple">
<li><p>Follow the instructions above to know the <a class="reference internal" href="#output-relax"><span class="std std-ref">output</span></a> and how to <a class="reference internal" href="#visualization-relax"><span class="std std-ref">visualize</span></a> the results</p></li>
</ul>
</div>
<hr class="docutils" />
<div class="section" id="references">
<h3>References<a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h3>
[1] Borthakur A., Wheaton A.J., Gougoutas A.J., Akella S.V., Regatte R.R., Charagundla S.R., Reddy R.
<a href="https://www.ncbi.nlm.nih.gov/pubmed/15065163" target="_blank">
<i>In vivo measurement of T1rho dispersion in the human brain at 1.5 tesla.</i></a>
J Magn Reson Imaging. Apr;19(4):403-9. 2004. <br>

[2] Li X., Benjamin Ma C., Link T.M., Castillo D.D., Blumenkrantz G., Lozano J., Carballido-Gamio J., Ries M., Majumdar S.
<a href="https://www.ncbi.nlm.nih.gov/pubmed/17307365" target="_blank">
<i>In vivo T1ρ and T2 mapping of articular cartilage in osteoarthritis of the knee using 3 T MRI.</i></a>
Osteoarthritis Cartilage. Jul;15(7):789-97. 2007. <br>

[3] Sveinsson B, Chaudhari AS, Gold GE, Hargreaves BA.
<a href="https://www.ncbi.nlm.nih.gov/pubmed/28017730" target="_blank">
<i>A simple analytic method for estimating T<sub>2</sub> in the knee from DESS.</i></a>
Magn Reson Imaging. May;38:63-70. 2017. <br></div>
</div>
</div>


          </div>
            
  <div class="footer-relations">
    
      <div class="pull-left">
        <a class="btn btn-default" href="morphology.html" title="previous chapter (use the left arrow)">Morphology</a>
      </div>
    
      <div class="pull-right">
        <a class="btn btn-default" href="development.html" title="next chapter (use the right arrow)">Development</a>
      </div>
    </div>
    <div class="clearer"></div>
  
        </div>
        <div class="clearfix"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="development.html" title="Development"
             >next</a> |</li>
        <li class="right" >
          <a href="morphology.html" title="Morphology"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">pyKNEEr 1.0.0 documentation</a> &#187;</li> 
      </ul>
    </div>
<script type="text/javascript">
  $("#mobile-toggle a").click(function () {
    $("#left-column").toggle();
  });
</script>
<script type="text/javascript" src="_static/js/bootstrap.js"></script>
  <div class="footer">
    &copy; Copyright 2018, Serena Bonaretti. Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
  </div>
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-135735296-1']);
      _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </body>
</html>